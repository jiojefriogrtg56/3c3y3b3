# Документация к datadiode на Python (USB-UART)

## Общее описание
Datadiode — это устройство и программное обеспечение для обеспечения односторонней передачи данных с использованием USB-UART (Silicon Labs CP2102). Реализация включает отправителя (send) и приёмник (receiver), которые используют протокол передачи файлов с коррекцией ошибок по Reed-Solomon. Программа написана на Python с графическим интерфейсом (GUI) на базе Tkinter и поддерживает фоновый режим.

## Компоненты
- Оборудование: 
  - USB-UART модуль (CP2102).
  - Перемычка для соединения TX отправителя с RX приёмника, GND соединён между устройствами.
- Программное обеспечение:
  - Sender: Отправляет файлы через USB-UART с кодированием Reed-Solomon.
  - Receiver: Принимает и декодирует файлы, сохраняя их на диск.

## Требования
- Python: Версия 3.6 или выше.
- Библиотеки:
  - tkinter (встроена в Python).
  - pyserial: pip install pyserial.
  - reedsolo: pip install reedsolo.
- Оборудование: Два компьютера с CP2102, подключённые через USB.

## Установка
1. Установить Python (https://www.python.org/downloads/).
2. Установить зависимости:
   
   pip install pyserial reedsolo
   
3. Подключить CP2102 к обоим компьютерам и установить драйверы (доступны на сайте Silicon Labs).
4. Скопируйте скрипты sender.py и receiver.py на соответствующие машины.

## Настройка
- Аппаратная:
  - Соединить TX отправителя с RX приёмника перемычкой.
  - Подключить GND к общему заземлению.
  - Убедитесь, что порты распознаны (например, COM14 и COM16 в Windows).
- Программная:
  - Отредактируйте скрипты или используйте аргументы командной строки для настройки:
    - Порт (например, --port COM14).
    - Скорость (например, --baud 921600).
    - Reed-Solomon (например, --rs 10).
    - Путь к файлу (например, --file C:/file.txt).
    - Папка сохранения (например, --dir D:/infodiode).

## Использование

### Отправитель (send.py)
- Запуск:
  
  python sender.py --port COM14 --baud 921600 --rs 10 --file C:/file.txt --send
  
  или с GUI:

  python sender.py
  
- Интерфейс:
  - Выберите файл через кнопку "Выберите файл".
  - Установите порт, скорость и Reed-Solomon через поля ввода.
  - Нажмите "Отправить файл" для передачи.
- Фоновый режим: Добавьте --nogui --send — программа отправит файл и закроется.

### Приёмник (receiver.py)
- Запуск:
  
  python receiver.py --port COM16 --baud 921600 --rs 10 --dir D:/infodiode --start
  
  или с GUI:

  python receiver.py
  
- Интерфейс:
  - Установите порт, Reed-Solomon и путь сохранения.
  - Нажмите "Запуск" для начала прослушивания.
  - Файлы сохраняются с префиксом decoded_.
- Фоновый режим: Добавьте --nogui --start — программа работает в фоне и закрывается после приёма.

## Технические детали
- Протокол:
  - Отправка: Длина имени (2 байта) + имя файла + закодированные данные.
  - Приём: Чтение данных, декодирование Reed-Solomon, сохранение.
- Скорость: До 3 млн бод (в зависимости от аппартаного ограничения).
- Reed-Solomon: Корректирует ошибки, параметр задаётся в байтах (максимум 254).

## Ограничения
- Односторонняя передача требует физической изоляции обратного канала.
- Максимальный размер файла ограничен памятью и скоростью UART.
- Не поддерживает сетевые протоколы (например, SMTP) напрямую.

## Устранение неполадок
- Порт не найден: Проверьте подключение CP2102 и список портов (python -m serial.tools.list_ports).
- Ошибка передачи: Увеличьте значение Reed-Solomon или снизьте скорость.
- Окно закрылось: Убедитесь, что --nogui используется только для фонового режима.

## Лицензия
Программа распространяется под MIT License. Автор: [jiojefriogrtg56], 2025.